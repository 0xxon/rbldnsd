rbldnsd (0.96pre) unstable; urgency=low

  * renamed almost all structures and variables, to be more accurate:
     struct dataset => struct dsdata  (dsd)
     struct zonedataset => struct dataset (zds => ds)
     struct zonedatalist => struct dslist (zdl => dsl)
     struct zonefile => struct dsfile (zf => dsf)
     struct dataset_type => struct dstype (dst)
     dataset_types[] => ds_types[]
     zds_loading => ds_loading
     struct dnsqueryinfo => struct dnsqinfo (qi)
     connectzonedataset() => connectdataset()
     zds_special() => ds_special()
   and so on.

  * reworked NS and SOA internals, to use more natural data structures
    (no more ugly packing of several fields into one char[])

  * always assume that SOA and NS refers to zone's base DN -
    less work for DN compression routines

  * precompute SOA and NS records (pack various fields, pre-compress
    domain names) for faster response time

  * return NS records if available in AUTHORITY section of positive
    replies

  * restore MX functionality that was broken for quite some time.
    Note that currently, MX records aren't compressed

 -- Michael Tokarev <mjt@corpit.ru>  Thu, 29 May 2003 04:57:21 +0400

rbldnsd (0.95) unstable; urgency=low

  * Portability: #include <netinet/in.h> for sockaddr_in definition in
    rbldnsd_packet.c

  * Allocate dataset to be part of zonedataset -> remove dataset's allocfn

  * Added `combined' dummy dataset

  * Change loading routines: ds_loadfn become ds_startfn and ds_linefn,
    ds_linefn is now passed via zonedataset to readdslines.  Preparations
    for combined dataset.

  * Implemented `combined' dataset, with many changes all other the places

  * Notes, TODO items updated

  * Fixed problem with DN compression introduced in recent changes.

  * cleanup of #include's

  * change names of zsoa, zns to reflect content more accurately

  * align argument for mp_alloc(), to align object(s) to sizeof(int).
    This allows to eliminate one mempool in combined dataset.

  * use varlen zns_ttldn[]

  * use one memory pool for all nested datasets in combined dataset

  * add additional argument to ds_resetfn_t - freeall boolean, to
    free all the memory instead of just zeroing it - needed for
    combined dataset, but not currently used anyway

  * in ip4set, remember size of previously allocated array to
    avoid unnecessary realloc()s

  * made ip4mask() to be an indexed array access to ip4addr_cidr_netmasks[]

 -- Michael Tokarev <mjt@corpit.ru>  Tue, 27 May 2003 22:18:20 +0400

rbldnsd (0.94) unstable; urgency=low

  * implemented -d option (dump zone data in BIND format to stdout)

  * data loading warnings goes to stderr instead of stdout

  * Makefile portability tweaks for Solaris

  * recognize ';' as comment char in addition to '#'; also, officially
    recognize comments after an entry (IP address or domain name) in
    ip4set and dnset

 -- Michael Tokarev <mjt@corpit.ru>  Mon, 26 May 2003 17:49:27 +0400

rbldnsd (0.93) unstable; urgency=low

  * reverse change made in 0.91: SOA TTL, when SOA is in AUTHORIRY
    section, should be set to MINTTL field of SOA itself.

 -- Michael Tokarev <mjt@corpit.ru>  Sun, 18 May 2003 19:05:38 +0400

rbldnsd (0.92) unstable; urgency=medium

  * bugfix: fixed SOA screwup introduced in 0.91

 -- Michael Tokarev <mjt@corpit.ru>  Sat, 17 May 2003 05:24:39 +0400

rbldnsd (0.91) unstable; urgency=low

  * print version info at build time (Makefile)
  * made SIGNALLED_* names action-, not signal-dependant
  * allow compilation without IPv6 (-DNOIPv6)
  * free addrinfo structure for bind address (not a real leak: it used once)
  * rotate nameserver records (simple cyclic rotation)
  * do not reallocate memory for dataset headers on every reload
  * fixed glitch in dnset - min DN labels was always 0 (tiny speedup only)
  * fixed default A RR to be 127.0.0.2, not 2.0.0.127
  * added a note about absolute vs relative domain names into manpage
  * allow to specify a unit (s, m, h, d, w) for all time values
  * changed default ttl to be 35m
  * use ISSPACE/SKIPSPACE everywhere
  * use PACK32/PACK16 everywhere
  * some more variants of parse_{time,uint32}
  * use parse_time() for -c option too
  * always use SOA's TTL when SOA is included in answer
  * added RPM .spec file

 -- Michael Tokarev <mjt@corpit.ru>  Thu, 15 May 2003 02:35:35 +0400

rbldnsd (0.90) unstable; urgency=low

  * 0.90 final.  Some little mods for IPv6.

 -- Michael Tokarev <mjt@corpit.ru>  Sat, 10 May 2003 01:54:52 +0400

rbldnsd (0.89p4.ip6) unstable; urgency=low

  * IPv6 transport support.  Default is to try any,
    specify -6 or -4 to select IPv6 or IPv4.

  * -a (ACL) and -L (log ACL) options are gone for now,
    because there is no IPv6 versions.

 -- Michael Tokarev <mjt@corpit.ru>  Thu,  8 May 2003 21:24:02 +0400

rbldnsd (0.89p4) unstable; urgency=low

  * NXDOMAIN elimination is gone.  Bind9 does that too, so I assume
    it is correct behaviour.  Many code removed.
  * Another prerelease.

 -- Michael Tokarev <mjt@corpit.ru>  Thu,  8 May 2003 21:24:02 +0400

rbldnsd (0.89p3) unstable; urgency=low

  * ip4vset and ip4set merged, ditto for dnvset and dnset.
  * $NS in datasets
  * $TTL in datasets generic records; now required for $SOA and $NS
  * $n substitutions
  * more details in NEWS

 -- Michael Tokarev <mjt@corpit.ru>  Thu,  8 May 2003 16:59:33 +0400

rbldnsd (0.89p2) unstable; urgency=low

  * again, many changes.  DN-based lists are now ok too from
    BIND point of view.  Logging improvements.  See NEWS file.

 -- Michael Tokarev <mjt@corpit.ru>  Tue,  6 May 2003 03:33:37 +0400

rbldnsd (0.89p1) unstable; urgency=low

  * big number of changes, to match BIND's runtime behaviour.
    See NEWS for details

 -- Michael Tokarev <mjt@corpit.ru>  Sun,  4 May 2003 18:27:42 +0400

rbldnsd (0.84p2) unstable; urgency=low

  * rewrote query parsing routine to be much more accurate (see
    version 0.83 change entry) and a bit faster.
  * cleanups, cleanups.
  * return definitive answer to AAAA, PTR and CNAME queries.  A
    hack for now, seeking for a better way...

 -- Michael Tokarev <mjt@corpit.ru>  Tue, 29 Apr 2003 04:29:02 +0400

rbldnsd (0.83) unstable; urgency=high

  * critical buffer overflow fix in dns query parsing code.
    Initial code (0.1 version) was right, but it was rewritten
    in 0.2 - the bug was here since 0.2!..  Ughhh!..

 -- Michael Tokarev <mjt@corpit.ru>  Sat, 19 Apr 2003 05:24:09 +0400

rbldnsd (0.83p1) unstable; urgency=low

  * -DNOSTDINT_H to use <sys/types.h> instead of <stdint.h> for uint32_t.
  * changed slightly "zone loaded" message
  * added minimal access control (-a netlist option)
  * added query log filter (-L netlist option), and added logging of
    timestamps.
  * moved packet receiving/replying stuff into rbldnsd.c
  * one-by-off bug - retrying interrupted replies was wrong
  * use inline version of qsort in order to be able to use inline
    comparision routine.  Speed up loading significantly.
  * allow to run as non-root; little cleanups
  * removed -DNOREMOVEDUPS, -DNOIP4RANGES, -DPRINT_TIMES => -DNOTIMES
  * added statistic counters (SIGUSR1/USR2/exit) - disable with -DNOSTATS
  * added meminfo logging via mallinfo (-m option) - disable with -DNOMEMINFO
  * fixed invocation w/o -b (bind address): rbldnsd wasn't work w/o -b at all

 -- Michael Tokarev <mjt@corpit.ru>  Sat, 19 Apr 2003 02:25:18 +0400

rbldnsd (0.82) unstable; urgency=low

  * recognize another variation of IP address range, for easy use:
    127.0.0.1-2 is now treated as 127.0.0.1-127.0.0.2
    127.0-200   is now treated as 127.0.0.0-127.200.255.255

  * rbldnsd w/o arguments will exit with 1 after printing usage info
    -h cause exit with 0
    (I forgot to add exit() call after usage())

  * example WirehubDynablock2rbldnsd.pl script

  * debianized, added startup script for Debian
    (rbldnsd is now a native Debian package)

 -- Michael Tokarev <mjt@corpit.ru>  Sat,  5 Apr 2003 11:40:31 +0400

rbldnsd (0.81-0) unstable; urgency=low

  * Initial Debian Release.
    Previous CHANGES file is now in CHANGES-0.81

 -- Michael Tokarev <mjt@corpit.ru>  Sat,  5 Apr 2003 00:30:39 +0400

Local variables:
mode: debian-changelog
End:
